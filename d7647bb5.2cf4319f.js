(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{266:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"rightToc",(function(){return r})),t.d(n,"default",(function(){return s}));var a=t(1),i=t(9),o=(t(0),t(310)),l={id:"layout-overview",title:"\u5e03\u5c40\u5f15\u64ce",sidebar_label:"\u6982\u89c8"},r=[{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",children:[]},{value:"\u4e0b\u8f7d",id:"\u4e0b\u8f7d",children:[{value:"\u9879\u76ee\u72b6\u6001",id:"\u9879\u76ee\u72b6\u6001",children:[]},{value:"\u6d4f\u89c8\u5668\u652f\u6301",id:"\u6d4f\u89c8\u5668\u652f\u6301",children:[]},{value:"\u8981\u6c42",id:"\u8981\u6c42",children:[]}]},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",children:[]}],p={rightToc:r},c="wrapper";function s(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(o.b)(c,Object(a.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/single-spa/single-spa-layout/"}),"Github \u4ed3\u5e93")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," npm package is an optional add-on to single-spa. The layout engine provides a routing API that controls your top level routes, applications, and dom elements. Using single-spa-layout makes it easier to accomplish the following:\n",Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," npm \u5305\u662f\u4e00\u4e2a\u53ef\u9009\u7684single-spa\u6269\u5c55\u63d2\u4ef6\u3002\u5b83\u63d0\u4f9b\u4e86\u8def\u7531API\u6765\u63a7\u5236\u9876\u5c42\u8def\u7531\uff0c\u5e94\u7528\u548cDOM\u5143\u7d20\u3002\u4f7f\u7528",Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout"),"\u53ef\u4ee5\u8f7b\u677e\u5b8c\u6210\u4e0b\u9762\u7684\u529f\u80fd"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"DOM\u751f\u6210\u548c\u5e94\u7528\u6392\u5e8f."),Object(o.b)("li",{parentName:"ul"},"\u5728\u5e94\u7528\u52a0\u8f7d\u5b8c\u6210\u540e\u52a0\u8f7dUI."),Object(o.b)("li",{parentName:"ul"},"\u4e3aNot Found / 404\u8bbe\u7f6e\u9ed8\u8ba4\u8def\u7531."),Object(o.b)("li",{parentName:"ul"},"\u8def\u7531\u8fc7\u6e21\uff08\u5f85\u5b9e\u73b0\uff09.")),Object(o.b)("p",null,"The layout engine performs two major tasks:\n\u5e03\u5c40\u5f15\u64ce\u4e3b\u8981\u6709\u4e0b\u9762\u4e24\u4e2a\u529f\u80fd\uff1a"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"\u4eceHTML / JSON\u5bf9\u8c61\u751f\u6210 ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api/#configuration-object"}),"single-spa \u6ce8\u518c\u914d\u7f6e")),Object(o.b)("li",{parentName:"ol"},"\u76d1\u542c ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/api/#events"}),"\u8def\u7531\u4e8b\u4ef6"),"\u6765\u786e\u4fdd\u5728single-spa\u6302\u8f7d\u5b8c\u6210\u4e4b\u524dDOM\u5143\u7d20\u52a0\u8f7d\u6b63\u786e.")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," is 3.2kb gzipped (9kb ungzipped)."),Object(o.b)("h2",{id:"\u4e0b\u8f7d"},"\u4e0b\u8f7d"),Object(o.b)("p",null,"\u4f60\u53ea\u9700\u8981\u4e0b\u8f7d",Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout"),"\u5230 ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/configuration/"}),"root config")," (\u4e0d\u8981\u653e\u5230\u5176\u4ed6\u7684\u5e94\u7528\u91cc)."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"npm install --save single-spa-layout@beta\n\n# or\nyarn add single-spa-layout@beta\n")),Object(o.b)("h3",{id:"\u9879\u76ee\u72b6\u6001"},"\u9879\u76ee\u72b6\u6001"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," \u662f\u4e00\u4e2a\u65b0\u7684\u5e76\u4e14\u5f53\u524d\u5728npm\u4e0a\u6709",Object(o.b)("inlineCode",{parentName:"p"},"beta"),"\u6807\u7b7e\u3002\u6211\u4eec\u6b63\u5728\u6536\u96c6\u53cd\u9988\u6765\u6539\u5584\u5e76\u4e3a\u4e86\u6709\u4e00\u4e2a\u7a33\u5b9a\u7684\u7248\u672c\u505a\u51c6\u5907\u3002\u867d\u7136\u6211\u4eec\u4e0d\u5e0c\u671blayout-engine\u6709\u4e00\u4e2a\u5f7b\u5e95\u7684\u6539\u53d8\uff0c\u4f46\u662f\u6211\u4eec\u63a8\u8350\u5728layout-engine\u7a33\u5b9a\u540e\u518d\u5e94\u7528\u5230\u751f\u4ea7\u73af\u5883"),Object(o.b)("h3",{id:"\u6d4f\u89c8\u5668\u652f\u6301"},"\u6d4f\u89c8\u5668\u652f\u6301"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," \u53ef\u4ee5\u5728\u6240\u6709\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\uff0c\u5305\u62ecIE11"),Object(o.b)("h3",{id:"\u8981\u6c42"},"\u8981\u6c42"),Object(o.b)("p",null,"\u4f60\u9700\u8981\u5728single-spa@>=5.4.0\u7684\u7248\u672c\u91cc\u9762\u4f7f\u7528layout engine\uff0c\u53e6\u5916\uff0c\u4f60\u4e0d\u7528\u5728\u4f60\u7684\u4efb\u4f55single-spa\u5e94\u7528\u4e2d\u63d0\u4f9b\u81ea\u5b9a\u4e49",Object(o.b)("inlineCode",{parentName:"p"},"domElementGetter")," \uff0c\u56e0\u4e3a\u4ed6\u4eec\u4f1a\u8986\u76d6 ",Object(o.b)("inlineCode",{parentName:"p"},"single-spa-layout")," \u7684\u914d\u7f6e"),Object(o.b)("h2",{id:"\u57fa\u672c\u7528\u6cd5"},"\u57fa\u672c\u7528\u6cd5"),Object(o.b)("p",null,"\u5728\u4f60\u7684\u6839html\u6587\u4ef6\u4e2d\u6dfb\u52a0 ",Object(o.b)("inlineCode",{parentName:"p"},"template"),"\u5143\u7d20\u5230head\u6807\u7b7e\u4e2d\uff0c\u4ed6\u9700\u8981\u6709\u4e00\u4e2a",Object(o.b)("inlineCode",{parentName:"p"},"<single-spa-router>"),"\u5143\u7d20\u5e76\u4e14\u9700\u8981\u5305\u542b ",Object(o.b)("inlineCode",{parentName:"p"},"<route")," \u548c ",Object(o.b)("inlineCode",{parentName:"p"},"<application>")," \u5143\u7d20\uff0c\u5e76\u5305\u542b\u5176\u4ed6DOM\u5143\u7d20  "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<html>\n  <head>\n    <template id="single-spa-layout">\n      <single-spa-router>\n        <nav class="topnav">\n          <application name="@organization/nav"></application>\n        </nav>\n        <div class="main-content">\n          <route path="settings">\n            <application name="@organization/settings"></application>\n          </route>\n          <route path="clients">\n            <application name="@organization/clients"></application>\n          </route>\n        </div>\n        <footer>\n          <application name="@organization/footer"></application>\n        </footer>\n      </single-spa-router>\n    </template>\n  </head>\n</html>\n')),Object(o.b)("p",null,"\u5728\u4f60\u7684root-config js\u4ee3\u7801\u91cc\u6dfb\u52a0\u4e0b\u9762\u7684\u4ee3\u7801"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"import { registerApplication, start } from 'single-spa';\nimport {\n  constructApplications,\n  constructRoutes,\n  constructLayoutEngine,\n} from 'single-spa-layout';\n\nconst routes = constructRoutes(document.querySelector('#single-spa-layout'));\nconst applications = constructApplications({\n  routes,\n  loadApp({ name }) {\n    return System.import(name);\n  },\n});\nconst layoutEngine = constructLayoutEngine({ routes, applications });\n\napplications.forEach(registerApplication);\nstart();\n")))}s.isMDXComponent=!0},310:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return b}));var a=t(0),i=t.n(a),o=i.a.createContext({}),l=function(e){var n=i.a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},r=function(e){var n=l(e.components);return i.a.createElement(o.Provider,{value:n},e.children)};var p="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},s=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,p=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===n.indexOf(a)&&(t[a]=e[a]);return t}(e,["components","mdxType","originalType","parentName"]),s=l(t),b=a,u=s[r+"."+b]||s[b]||c[b]||o;return t?i.a.createElement(u,Object.assign({},{ref:n},p,{components:t})):i.a.createElement(u,Object.assign({},{ref:n},p))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=s;var r={};for(var c in n)hasOwnProperty.call(n,c)&&(r[c]=n[c]);r.originalType=e,r[p]="string"==typeof e?e:a,l[1]=r;for(var b=2;b<o;b++)l[b]=t[b];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,t)}s.displayName="MDXCreateElement"}}]);